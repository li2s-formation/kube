import{f as w,a7 as M,o as r,e as u,g as y,m as L,T as a,j as h,r as B,n as b,O as W,E as A,L as V,aL as _,D as O,d as T,t as q,i as z,b as I,k as K,z as x}from"../modules/vue-BkUzi_-h.js";import{ak as D,o as H,al as X,am as R,C as U}from"../index-BUbUA761.js";import{e as P,f as Y}from"../modules/unplugin-icons-vTeJREiE.js";import{u as F}from"./context-Zjxl39t-.js";const G=["width","height"],J=["id"],Q=["fill"],Z=["id"],ee=["fill"],te=["x1","y1","x2","y2","stroke","stroke-width","marker-end","marker-start"],ie=["x1","y1","x2","y2"],ve=w({__name:"Arrow",props:{x1:{},y1:{},x2:{},y2:{},width:{},color:{},twoWay:{type:Boolean}},emits:["dblclick","clickOutside"],setup(e,{emit:t}){const o=t,i=D(),n={markerUnits:"strokeWidth",markerHeight:7,refY:3.5,orient:"auto"},d=B();return M(d,()=>o("clickOutside")),(l,s)=>(r(),u("svg",{class:"absolute left-0 top-0",width:Math.max(+e.x1,+e.x2)+50,height:Math.max(+e.y1,+e.y2)+50},[y("defs",null,[y("marker",L({id:a(i),markerWidth:"10",refX:"9"},n),[y("polygon",{points:"0 0, 10 3.5, 0 7",fill:e.color||"currentColor",onDblclick:s[0]||(s[0]=v=>o("dblclick"))},null,40,Q)],16,J),e.twoWay?(r(),u("marker",L({key:0,id:`${a(i)}-rev`,markerWidth:"20",refX:"11"},n),[y("polygon",{points:"20 0, 10 3.5, 20 7",fill:e.color||"currentColor",onDblclick:s[1]||(s[1]=v=>o("dblclick"))},null,40,ee)],16,Z)):h("v-if",!0)]),y("line",{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:e.color||"currentColor","stroke-width":e.width||2,"marker-end":`url(#${a(i)})`,"marker-start":e.twoWay?`url(#${a(i)}-rev)`:"none",onDblclick:s[2]||(s[2]=v=>o("dblclick"))},null,40,te),y("line",{ref_key:"clickArea",ref:d,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:"transparent","stroke-linecap":"round","stroke-width":20,onDblclick:s[3]||(s[3]=v=>o("dblclick"))},null,40,ie)],8,G))}}),oe=w({__name:"TitleIcon",props:{title:{}},setup(e){const t={pnpm:"i-vscode-icons:file-type-light-pnpm",npm:"i-vscode-icons:file-type-npm",yarn:"i-vscode-icons:file-type-yarn",bun:"i-vscode-icons:file-type-bun",deno:"i-vscode-icons:file-type-deno",vue:"i-vscode-icons:file-type-vue",svelte:"i-vscode-icons:file-type-svelte",angular:"i-vscode-icons:file-type-angular",react:"i-vscode-icons:file-type-reactjs",next:"i-vscode-icons:file-type-light-next",nuxt:"i-vscode-icons:file-type-nuxt",solid:"logos:solidjs-icon",astro:"i-vscode-icons:file-type-light-astro",rollup:"i-vscode-icons:file-type-rollup",webpack:"i-vscode-icons:file-type-webpack",vite:"i-vscode-icons:file-type-vite",esbuild:"i-vscode-icons:file-type-esbuild","package.json":"i-vscode-icons:file-type-node","tsconfig.json":"i-vscode-icons:file-type-tsconfig",".npmrc":"i-vscode-icons:file-type-npm",".editorconfig":"i-vscode-icons:file-type-editorconfig",".eslintrc":"i-vscode-icons:file-type-eslint",".eslintignore":"i-vscode-icons:file-type-eslint","eslint.config":"i-vscode-icons:file-type-eslint",".gitignore":"i-vscode-icons:file-type-git",".gitattributes":"i-vscode-icons:file-type-git",".env":"i-vscode-icons:file-type-dotenv",".env.example":"i-vscode-icons:file-type-dotenv",".vscode":"i-vscode-icons:file-type-vscode","tailwind.config":"vscode-icons:file-type-tailwind","uno.config":"i-vscode-icons:file-type-unocss","unocss.config":"i-vscode-icons:file-type-unocss",".oxlintrc":"i-vscode-icons:file-type-oxlint","vue.config":"i-vscode-icons:file-type-vueconfig",".mts":"i-vscode-icons:file-type-typescript",".cts":"i-vscode-icons:file-type-typescript",".ts":"i-vscode-icons:file-type-typescript",".tsx":"i-vscode-icons:file-type-typescript",".mjs":"i-vscode-icons:file-type-js",".cjs":"i-vscode-icons:file-type-js",".json":"i-vscode-icons:file-type-json",".js":"i-vscode-icons:file-type-js",".jsx":"i-vscode-icons:file-type-js",".md":"i-vscode-icons:file-type-markdown",".py":"i-vscode-icons:file-type-python",".ico":"i-vscode-icons:file-type-favicon",".html":"i-vscode-icons:file-type-html",".css":"i-vscode-icons:file-type-css",".scss":"i-vscode-icons:file-type-scss",".yml":"i-vscode-icons:file-type-light-yaml",".yaml":"i-vscode-icons:file-type-light-yaml",".php":"i-vscode-icons:file-type-php",".svg":"i-vscode-icons:file-type-svg"};function o(i){const n=i.match(/~([^~]+)~/g);if(n&&n.length>0)return n[0].slice(1,-1);const d=Object.keys(t).sort((l,s)=>s.length-l.length);for(const l of d)if(i.toLowerCase().includes(l.toLowerCase()))return t[l];return""}return(i,n)=>o(e.title)?(r(),u("div",{key:0,class:b(`${o(e.title)} w-3.5 h-3.5 relative`)},null,2)):h("v-if",!0)}}),se=["data-title"],ne={key:0,class:"slidev-code-block-title"},le={class:"leading-1em"},ce=["title"],ue=w({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:H.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0},title:{type:String,default:void 0}},setup(e){const t=e,{$clicksContext:o}=F(),i=B(),n=D();W(()=>{o.unregister(n)}),A(()=>{i.value?.classList.toggle("slidev-code-line-numbers",t.lines)}),V(()=>{if(!o||!t.ranges?.length)return;const c=o.calculateSince(t.at,t.ranges.length-1);o.register(n,c);const p=x(()=>c?Math.max(0,o.current-c.start+1):U),m=x(()=>t.finally==="last"?t.ranges.at(-1):t.finally.toString());A(()=>{if(!i.value)return;let g=t.ranges[p.value]??m.value;const k=g==="hide";i.value.classList.toggle(X,k),k&&(g=t.ranges[p.value+1]??m.value);const S=i.value.querySelector(".shiki"),j=Array.from(S.querySelectorAll("code > .line")),N=j.length;if(R(g,N,t.startLine,f=>[j[f]]),t.maxHeight){const f=Array.from(S.querySelectorAll(".line.highlighted"));f.reduce(($,E)=>E.offsetHeight+$,0)>i.value.offsetHeight?f[0].scrollIntoView({behavior:"smooth",block:"start"}):f.length>0&&f[Math.round((f.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:d,copy:l}=_();function s(){const c=i.value?.querySelector(".slidev-code")?.textContent;c&&l(c)}const v=O("activeTitle",null),C=x(()=>v===null&&t.title);return(c,p)=>{const m=P,g=Y;return r(),u("div",{ref_key:"el",ref:i,class:b(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":t.lines,active:a(v)===e.title}]),style:K({"max-height":t.maxHeight,"overflow-y":t.maxHeight?"scroll":void 0,"--start":t.startLine}),"data-title":e.title},[C.value?(r(),u("div",ne,[T(oe,{title:e.title},null,8,["title"]),y("div",le,q(e.title.replace(/~([^~]+)~/g,"").trim()),1)])):h("v-if",!0),z(c.$slots,"default"),a(H).codeCopy?(r(),u("button",{key:1,class:b(["slidev-code-copy absolute right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",C.value?"top-10":"top-0"]),title:a(d)?"Copied":"Copy",onClick:p[0]||(p[0]=k=>s())},[a(d)?(r(),I(m,{key:0,class:"p-2 w-8 h-8"})):(r(),I(g,{key:1,class:"p-2 w-8 h-8"}))],10,ce)):h("v-if",!0)],14,se)}}});export{ue as _,ve as a};
